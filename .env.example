# VN-QUANT Environment Configuration
# Copy this file to .env and fill in your actual values

# ============================================
# ENVIRONMENT
# ============================================
ENVIRONMENT=development  # development, staging, production
DEBUG=true
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR, CRITICAL

# ============================================
# API KEYS
# ============================================
# LLM API (CCS proxy - Claudible Sonnet 4.6)
LLM_API_KEY=your_ccs_proxy_api_key_here
LLM_BASE_URL=http://localhost:8317/v1
LLM_MODEL=claude-sonnet-4-6
USE_LLM_AGENTS=true

# Legacy Gemini AI API Key (deprecated)
GEMINI_API_KEY=your_gemini_api_key_here

# Telegram Bot
TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here
TELEGRAM_ADMIN_IDS=123456789,987654321  # Comma-separated admin user IDs

# Finnhub API (for news)
FINNHUB_API_KEY=your_finnhub_api_key_here

# ============================================
# BROKER CREDENTIALS
# ============================================
# SSI Securities
SSI_USERNAME=your_ssi_username
SSI_PASSWORD=your_ssi_password
SSI_API_KEY=your_ssi_api_key
SSI_SECRET_KEY=your_ssi_secret_key

# VNDIRECT
VNDIRECT_USERNAME=your_vndirect_username
VNDIRECT_PASSWORD=your_vndirect_password
VNDIRECT_API_KEY=your_vndirect_api_key

# VPS Securities
VPS_USERNAME=your_vps_username
VPS_PASSWORD=your_vps_password

# ============================================
# DATABASE
# ============================================
DATABASE_URL=postgresql://vnquant:password@localhost:5432/vnquant_db
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=10

# Redis (for caching)
REDIS_URL=redis://localhost:6379/0
REDIS_PASSWORD=

# ============================================
# TRADING CONFIGURATION
# ============================================
# Paper Trading vs Live Trading
TRADING_MODE=paper  # paper, live

# Initial capital (VND)
INITIAL_CAPITAL=100000000  # 100M VND

# Risk parameters
MAX_POSITION_PCT=0.15  # 15% max per position
MAX_POSITIONS=10
STOP_LOSS_PCT=0.07  # 7%
TAKE_PROFIT_PCT=0.15  # 15%
MAX_DAILY_LOSS_PCT=0.05  # 5% daily loss limit

# Auto trading
AUTO_TRADE_ENABLED=false  # Set to true to enable auto trading
AUTO_SCAN_INTERVAL=300  # seconds (5 minutes)

# ============================================
# MODEL TRAINING
# ============================================
# Weekly training schedule (cron format: minute hour day month day_of_week)
# Default: 0 2 * * 0 = Sundays at 2:00 AM
TRAINING_SCHEDULE=0 2 * * 0

# Training timezone
TIMEZONE=Asia/Ho_Chi_Minh

# Enable training notifications (Slack, Email)
ENABLE_NOTIFICATIONS=false

# Training notifications
SLACK_WEBHOOK_URL=  # Optional: Slack webhook for training alerts
EMAIL_RECIPIENTS=  # Optional: Comma-separated emails for training reports
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=  # Email address for sending reports
SMTP_PASSWORD=  # App password (not regular password)

# ============================================
# DATA SOURCES
# ============================================
# Real-time data provider
DATA_PROVIDER=vci  # vci, ssi, fireant

# Data cache settings
CACHE_TTL=300  # seconds
DATA_DIR=data
HISTORICAL_DATA_DIR=data/historical

# ============================================
# MONITORING & ALERTING
# ============================================
# Prometheus metrics
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090

# Grafana
GRAFANA_URL=http://localhost:3000
GRAFANA_API_KEY=your_grafana_api_key

# Alert settings
ALERT_EMAIL=your_email@example.com
ALERT_WEBHOOK_URL=https://your-webhook-url.com/alerts

# Slack alerts (optional)
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# ============================================
# API SERVER
# ============================================
API_HOST=0.0.0.0
API_PORT=8003
API_WORKERS=4

# CORS - Comma-separated list of allowed origins
CORS_ORIGINS=
ALLOWED_ORIGINS=http://localhost:5176,http://localhost:8100
PRODUCTION_ORIGIN=https://your-domain.com

# Rate limiting
RATE_LIMIT_PER_MINUTE=60

# ============================================
# SECURITY
# ============================================
# JWT secret for API authentication
JWT_SECRET=your_super_secret_jwt_key_change_this_in_production
JWT_ALGORITHM=HS256
JWT_EXPIRATION=3600  # seconds (1 hour)

# API key for sensitive endpoints (reset, stop, test trades)
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
API_KEY=your_api_key_for_sensitive_endpoints

# ============================================
# BACKTEST
# ============================================
BACKTEST_COMMISSION=0.0015  # 0.15%
BACKTEST_SLIPPAGE=0.001  # 0.1%
BACKTEST_TAX=0.001  # 0.1% on sells

# ============================================
# PERFORMANCE & OPTIMIZATION
# ============================================
# Threading
MAX_WORKERS=8

# Memory limits
MAX_MEMORY_MB=4096

# ============================================
# EXTERNAL SERVICES
# ============================================
# News sources
NEWS_AUTO_SCHEDULE=true
NEWS_AUTO_IMPACT=true
NEWS_SOURCES=cafef,vietstock,ndh

# Market data
MARKET_DATA_FEED=ssi  # ssi, vndirect, fireant

# ============================================
# TIMEZONE
# ============================================
TZ=Asia/Ho_Chi_Minh

# ============================================
# MISC
# ============================================
# Chart settings
CHART_DAYS=30
CHART_WIDTH=800
CHART_HEIGHT=600

# Heartbeat monitoring
HEARTBEAT_INTERVAL=300  # seconds
STATUS_PORT=8088
